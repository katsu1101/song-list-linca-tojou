(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2599:(e,t,a)=>{Promise.resolve().then(a.bind(a,5800))},5800:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var o=a(5155);let s=async()=>{let e=localStorage.getItem("build-version"),t=localStorage.getItem("data-version"),a="/song-list-linca-tojou";try{let[o,s]=await Promise.all([fetch("".concat(a,"/build-version.json")),fetch("".concat(a,"/data-version.json"))]),l=(await o.json()).version,n=(await s.json()).version;l!==e?(console.log("⚠️ ビルドバージョンが変更されました。キャッシュをクリアします..."),await r(),localStorage.setItem("build-version",l),localStorage.setItem("data-version",n),location.reload()):n!==t&&(console.log("\uD83D\uDD04 データバージョンが変更されました。データキャッシュのみクリア..."),await r(),localStorage.setItem("data-version",n))}catch(e){console.error("バージョンチェックに失敗しました:",e)}},r=async()=>{if("caches"in window){let e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e))),console.log("✅ キャッシュをクリアしました。")}};var l=a(2115);function n(){let[e,t]=(0,l.useState)([]),[a,r]=(0,l.useState)({}),[n,i]=(0,l.useState)("");(0,l.useEffect)(()=>{s().then(e=>{console.log("checkVersionAndUpdateCache()",e)}),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(()=>{console.log("Service Worker registered.")})},[]),(0,l.useEffect)(()=>{fetch("".concat("/song-list-linca-tojou","/songs.json")).then(e=>e.json()).then(e=>{t([...e.songs].sort((e,t)=>e.date!==t.date?t.date.localeCompare(e.date):(e.timestamp||0)-(t.timestamp||0))),r(e.videos||{})}).catch(e=>console.error("Failed to load songs.json:",e))},[]);let c=e.filter(e=>{var t,o;let s=a[e.videoId];return e.title.toLowerCase().includes(n.toLowerCase())||e.date.includes(n)||((null==s?void 0:null===(o=s.snippet)||void 0===o?void 0:null===(t=o.title)||void 0===t?void 0:t.toLowerCase())||"").includes(n.toLowerCase())}),d={};return c.forEach(e=>{d[e.date]||(d[e.date]={}),d[e.date][e.videoId]||(d[e.date][e.videoId]=[]),d[e.date][e.videoId].push(e)}),(0,o.jsxs)("main",{className:"max-w-4xl mx-auto p-4 text-gray-900 dark:text-gray-100 bg-white dark:bg-gray-900",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-center mb-6",children:"戸定梨香ちゃんの歌リスト"}),(0,o.jsx)("div",{className:"mb-6",children:(0,o.jsx)("input",{type:"text",placeholder:"曲名・日付・動画タイトルで検索",value:n,onChange:e=>i(e.target.value),className:"w-full p-2 border border-gray-400 rounded-md dark:bg-gray-800 dark:text-gray-100"})}),Object.entries(d).length>0?Object.entries(d).map(e=>{let[t,s]=e;return(0,o.jsxs)("section",{className:"mb-8",children:[(0,o.jsx)("h2",{className:"text-2xl font-semibold border-b-2 pb-2",children:t}),(0,o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:Object.entries(s).map(e=>{var t,s,r,l,n;let[i,c]=e,d=a[i];return(0,o.jsxs)("div",{className:"p-4 border rounded-lg shadow-md transition-transform duration-300 ".concat(1===c[0].source?"bg-gray-300 dark:bg-gray-700 hover:scale-105":"bg-blue-100 dark:bg-blue-900 hover:scale-105 border-blue-500"),children:[(0,o.jsx)("a",{href:"https://www.youtube.com/watch?v=".concat(i,"&t=0s"),target:"_blank",rel:"noopener noreferrer",className:"block",children:(0,o.jsx)("img",{src:(null==d?void 0:null===(r=d.snippet)||void 0===r?void 0:null===(s=r.thumbnails)||void 0===s?void 0:null===(t=s.high)||void 0===t?void 0:t.url)||"https://img.youtube.com/vi/".concat(i,"/hqdefault.jpg"),alt:(null==d?void 0:null===(l=d.snippet)||void 0===l?void 0:l.title)||c[0].title,className:"w-full object-cover rounded-md ".concat(1===c[0].source?"h-48":"h-32")})}),(null==d?void 0:null===(n=d.snippet)||void 0===n?void 0:n.title)&&(0,o.jsx)("p",{className:"mt-2 text-center font-semibold text-lg text-gray-900 dark:text-gray-100",children:d.snippet.title}),1===c[0].source?(0,o.jsxs)("p",{className:"mt-2 font-medium text-center text-lg text-gray-900 dark:text-gray-100",children:["♬ ",c[0].title]}):(0,o.jsx)("div",{className:"mt-2",children:(0,o.jsx)("ul",{className:"mt-2 space-y-2 text-gray-800 dark:text-gray-300",children:c.map(e=>(0,o.jsx)("li",{className:"text-sm",children:(0,o.jsxs)("a",{href:"https://www.youtube.com/watch?v=".concat(e.videoId).concat(e.timestamp?"&t=".concat(e.timestamp,"s"):""),target:"_blank",rel:"noopener noreferrer",className:"block hover:underline hover:text-blue-500",children:["♪ ",e.title," ",e.timestamp?"(".concat(e.timestamp,"s)"):""]})},e.timestamp))})})]},i)})})]},t)}):(0,o.jsx)("p",{className:"text-center text-gray-500",children:"検索結果がありません"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(2599)),_N_E=e.O()}]);